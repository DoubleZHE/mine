## Mybatis 的分页实现

数据进行分页是开发里最基础的功能，一般可以把分页分为两类：

- 逻辑分页：先把查询出的数据缓存到内存里面，再根据业务相关的需求从内存的数据里面去筛选出合适的数据进行分页
- 物理分页：直接利用数据库里面所支持的分页语法来实现。比如：MySQL 提供了分页相关的关键词 `limit`

Mybatis 提供了四种分页方式：

- 在 Mybatis Mapper 配置文件里面直接写分页 SQL：**直接在 select 语句上增加数据库提供的分页关键字，然后在应用程序里面传递当前页以及每页展示条数即可**

  灵活且实现简单

- 通过 RowBounds 实现逻辑分页：**使用 Mybatis 提供的 RowBounds 对象实现内存级别的分页**

  一次性加载所有符合查询条件的目标数据，根据分页参数的值在内存里面实现分页。

  不适合数据量较大的场景，且可能会频繁的访问数据库造成较大压力

  > 在数据量比较大的情况下 JDBC 驱动本身会做一些优化，也就是说不会把所有的结果一次性查询存储在 ResultSet 里面，而是先只加载一部分数据然后再根据去数据库里滚动加载对应后续的一些数据。

- 通过 Interceptor 拦截器实现：**基于 Mybatis 提供的 Interceptor 拦截器，在 select 语句执行之前动态拼接分页关键字**

  通过拦截需要进行分页的 select 语句，然后在这个 select 语句里面去动态拼接分页的关键字，从而实现分页查询。

  优点：

  1. 可以提供统一的处理机制
  2. 不需要单独维护分页相关的功能

  > Interceptor 是 Mybatis 提供的一种针对于不同生命周期的拦截器。比如：拦截执行器方法、拦截参数的处理、拦截结果集的处理、拦截 SQL 语法构建的处理。
  >
  > 通过拦截不同阶段的处理，来实现 Mybatis 里面相关功能的扩展。
  >
  > ![Interceptor 拦截器](../../../ImageRepository/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A/Java%20%E6%8A%80%E6%9C%AF/%E9%9D%A2%E8%AF%95%E9%A2%98/Mybatis/Interceptor%20%E6%8B%A6%E6%88%AA%E5%99%A8.png)

  