## SVN 生命周期

### 创建版本库

`Create` 操作是用来创建一个新的版本库。

### 检出

`Checkout` 操作是用来从版本库创建一个工作副本。工作副本是开发者私人的工作空间，可以进行内容的修改，然后提交到版本库中。

### 更新

`update` 操作是用来更新版本库的。这个操作将工作副本与版本库进行同步。

> 假设 Tom 和 Jerry 是一个项目的两个开发者。他们同时从版本库中检出了最新的版本并开始工作。此时，工作副本是与版本库完全同步的。然后，Jerry 很高效的完成了他的工作并提交了更改到版本库中。
>
> 此时 Tom 的工作副本就过期了。更新操作将会从版本库中拉取 Jerry 的最新改动并将 Tom 的工作副本进行更新。

### 执行变更

当检出之后，你就可以做很多操作来执行变更。编辑是最常用的操作。你可以编辑已存在的文件，例如进行文件的添加/删除操作。

你可以添加文件/目录。但是这些添加的文件目录不会立刻成为版本库的一部分，而是被添加进待变更列表中，直到执行了 `commit` 操作后才会成为版本库的一部分。

同样地你可以删除文件/目录。删除操作立刻将文件从工作副本中删除掉，但该文件的实际删除只是被添加到了待变更列表中，直到执行了 `commit` 操作后才会真正删除。

`Rename` 操作可以更改文件/目录的名字。"移动"操作用来将文件/目录从一处移动到版本库中的另一处。

### 复查变化

当你检出工作副本或者更新工作副本后，你的工作副本就跟版本库完全同步了。但是当你对工作副本进行一些修改之后，你的工作副本会比版本库要新。在 `commit` 操作之前复查下你的修改是一个很好的习惯。

`Status` 操作列出了工作副本中所进行的变动。正如我们之前提到的，你对工作副本的任何改动都会成为待变更列表的一部分。`Status` 操作就是用来查看这个待变更列表。

`Status` 操作只是提供了一个变动列表，但并不提供变动的详细信息。你可以用 `diff` 操作来查看这些变动的详细信息。

### 修复错误

`Revert` 操作重置了对工作副本的修改。它可以重置一个或多个文件/目录。当然它也可以重置整个工作副本。在这种情况下，`revert` 操作将会销毁待变更列表并将工作副本恢复到原始状态。

### 解决冲突

合并的时候可能会发生冲突。<br>`Merge` 操作会自动处理可以安全合并的东西。其它的会被当做冲突。例如，"hello.c" 文件在一个分支上被修改，在另一个分支上被删除了。这种情况就需要人为处理。`Resolve` 操作就是用来帮助用户找出冲突并告诉版本库如何处理这些冲突。

### 提交更改

Commit 操作是用来将更改从工作副本到版本库。这个操作会修改版本库的内容，其它开发者可以通过更新他们的工作副本来查看这些修改。

在提交之前，你必须将文件/目录添加到待变更列表中。列表中记录了将会被提交的改动。当提交的时候，我们通常会提供一个注释来说明为什么会进行这些改动。这个注释也会成为版本库历史记录的一部分。<br>Commit 是一个原子操作，也就是说要么完全提交成功，要么失败回滚。用户不会看到成功提交一半的情况。

## SVN 启动模式

### 在服务端进行SVN版本库的相关配置

1. 手动新建版本库目录

```shell
mkdir /opt/svn
```

2. 利用 SVN 命令创建版本库

```
svnadmin create /opt/svn/runoob
```

3. 使用命令 svnserve 启动服务

```
svnserve -d -r 目录 --listen-port 端口号
```

- **-r:** 配置方式决定了版本库访问方式。
- **--listen-port:** 指定 SVN 监听端口，不加此参数，SVN 默认监听 3690
- 由于 -r 配置方式的不一样，SVN 启动就可以有两种不同的访问方式

- 方式一：-r 直接指定到版本库(称之为单库 svnserve 方式)

- ```
  svnserve -d -r /opt/svn/runoob
  ```

- 在这种情况下，一个 svnserve 只能为一个版本库工作。

- authz 配置文件中对版本库权限的配置应这样写：

- ```
  [groups]
  admin=user1
  dev=user2
  [/]
  @admin=rw
  user2=r
  ```

- 使用类似这样的 URL: svn://192.168.0.1/　即可访问 runoob 版本库

- 方式二：指定到版本库的上级目录(称之为多库 svnserve 方式)

- ```
  svnserve -d -r /opt/svn
  ```

- 这种情况，一个 svnserve 可以为多个版本库工作

- authz 配置文件中对版本库权限的配置应这样写：

- ```
  [groups]
  admin=user1
  dev=user2
  [runoob:/]
  @admin=rw
  user2=r
  
  [runoob01:/]
  @admin=rw
  user2=r
  ```

- 如果此时你还用 [/]，则表示所有库的根目录，同理，[/src] 表示所有库的根目录下的 src 目录。

- 使用类似这样的URL: svn://192.168.0.1/runoob　即可访问 runoob 版本库

- ## SVN 创建版本库

- 使用 SVN 命令创建资源库：

- ```shell
  svnadmin create /opt/svn/
  ```

